<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-------------------------------------------------------------->
<!-- qLibc Project                                            -->
<!--                                                          -->
<!--            Copyright (c) The qDecoder Project            -->
<!--                 http://www.qdecoder.org                  -->
<!-------------------------------------------------------------->

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <title>qlibc: utilities/qfile.c File Reference</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>

<body>
<center><h1>qLibc API Reference</h1></center>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>utilities/qfile.c File Reference</h1>  </div>
</div>
<div class="contents">
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>File handling APIs. </p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5e813a1311d212940f55ab4686933d1f"></a><!-- doxytag: member="qfile.c::MAX_EXTENSION_LENGTH" ref="a5e813a1311d212940f55ab4686933d1f" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MAX_EXTENSION_LENGTH</b>&nbsp;&nbsp;&nbsp;(8)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfile_8c.html#aee13ab9a468771f9b4e60ae117d1f613">qfile_lock</a> (int fd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock file.  <a href="#aee13ab9a468771f9b4e60ae117d1f613"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfile_8c.html#a964a6571f9178ce478d61fe7c4f1021e">qfile_unlock</a> (int fd)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unlock file which is locked by <a class="el" href="qfile_8c.html#aee13ab9a468771f9b4e60ae117d1f613" title="Lock file.">qfile_lock()</a>.  <a href="#a964a6571f9178ce478d61fe7c4f1021e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfile_8c.html#af22eeea721ad66346d7e19f82b28fdb0">qfile_exist</a> (const char *filepath)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check file existence.  <a href="#af22eeea721ad66346d7e19f82b28fdb0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfile_8c.html#a0d1cd1e907efc6272ae969e702c7eb22">qfile_load</a> (const char *filepath, size_t *nbytes)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load file into memory.  <a href="#a0d1cd1e907efc6272ae969e702c7eb22"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfile_8c.html#aaa2d98ebd5690feeac3539499bf40f2e">qfile_read</a> (FILE *fp, size_t *nbytes)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read data from a file stream.  <a href="#aaa2d98ebd5690feeac3539499bf40f2e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfile_8c.html#aaef22ff4a8a80e6356583335cc34db64">qfile_save</a> (const char *filepath, const void *buf, size_t size, bool append)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Save data into file.  <a href="#aaef22ff4a8a80e6356583335cc34db64"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfile_8c.html#ae623f84683c9aa6f58ead2f16a8f63db">qfile_mkdir</a> (const char *dirpath, mode_t mode, bool recursive)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attempts to create a directory recursively.  <a href="#ae623f84683c9aa6f58ead2f16a8f63db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfile_8c.html#af382e5541d166ecb6229dcac10a029ff">qfile_check_path</a> (const char *path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check path string contains invalid characters.  <a href="#af382e5541d166ecb6229dcac10a029ff"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfile_8c.html#a0321a4d7ef62cd24639626eb4ccaf751">qfile_get_name</a> (const char *filepath)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get filename from filepath.  <a href="#a0321a4d7ef62cd24639626eb4ccaf751"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfile_8c.html#aef38e80b0559f31af14dbeabbd1ac7a8">qfile_get_dir</a> (const char *filepath)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get directory suffix from filepath.  <a href="#aef38e80b0559f31af14dbeabbd1ac7a8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfile_8c.html#aed46fca5010cfdedca9da70f904210fa">qfile_get_ext</a> (const char *filepath)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get extension from filepath.  <a href="#aed46fca5010cfdedca9da70f904210fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">off_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfile_8c.html#af4b95ff503ddf957bc1d0d1a139a4be2">qfile_get_size</a> (const char *filepath)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get file size.  <a href="#af4b95ff503ddf957bc1d0d1a139a4be2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfile_8c.html#a1f45c0b35c3a43acd632d79c6dcfea70">qfile_correct_path</a> (char *path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Correct path string.  <a href="#a1f45c0b35c3a43acd632d79c6dcfea70"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="qfile_8c.html#a145c18b1c6a05c971129cf7d4247b921">qfile_abspath</a> (char *buf, size_t bufsize, const char *path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Make full absolute system path string.  <a href="#a145c18b1c6a05c971129cf7d4247b921"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aee13ab9a468771f9b4e60ae117d1f613"></a><!-- doxytag: member="qfile.c::qfile_lock" ref="aee13ab9a468771f9b4e60ae117d1f613" args="(int fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool qfile_lock </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lock file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fd</em>&nbsp;</td><td>file descriptor</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if successful, otherwise returns false.</dd></dl>
<div class="fragment"><pre class="fragment">   <span class="comment">// for file descriptor</span>
   <span class="keywordtype">int</span> fd = open(...);
   <span class="keywordflow">if</span>(<a class="code" href="qfile_8c.html#aee13ab9a468771f9b4e60ae117d1f613" title="Lock file.">qfile_lock</a>(fd) == <span class="keyword">true</span>) {
     (...atomic file access...)
     <a class="code" href="qfile_8c.html#a964a6571f9178ce478d61fe7c4f1021e" title="Unlock file which is locked by qfile_lock().">qfile_unlock</a>(fd);
   }

   <span class="comment">// for FILE stream object</span>
   FILE *fp = fopen(...);
   <span class="keywordtype">int</span> fd = fileno(fp);
   <span class="keywordflow">if</span>(<a class="code" href="qfile_8c.html#aee13ab9a468771f9b4e60ae117d1f613" title="Lock file.">qfile_lock</a>(fd) == <span class="keyword">true</span>) {
     (...atomic file access...)
     <a class="code" href="qfile_8c.html#a964a6571f9178ce478d61fe7c4f1021e" title="Unlock file which is locked by qfile_lock().">qfile_unlock</a>(fd);
   }
</pre></div> 
</div>
</div>
<a class="anchor" id="a964a6571f9178ce478d61fe7c4f1021e"></a><!-- doxytag: member="qfile.c::qfile_unlock" ref="a964a6571f9178ce478d61fe7c4f1021e" args="(int fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool qfile_unlock </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unlock file which is locked by <a class="el" href="qfile_8c.html#aee13ab9a468771f9b4e60ae117d1f613" title="Lock file.">qfile_lock()</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fd</em>&nbsp;</td><td>file descriptor</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if successful, otherwise returns false. </dd></dl>

</div>
</div>
<a class="anchor" id="af22eeea721ad66346d7e19f82b28fdb0"></a><!-- doxytag: member="qfile.c::qfile_exist" ref="af22eeea721ad66346d7e19f82b28fdb0" args="(const char *filepath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool qfile_exist </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filepath</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check file existence. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filepath</em>&nbsp;</td><td>file or directory path</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if exists, otherwise returns false. </dd></dl>

</div>
</div>
<a class="anchor" id="a0d1cd1e907efc6272ae969e702c7eb22"></a><!-- doxytag: member="qfile.c::qfile_load" ref="a0d1cd1e907efc6272ae969e702c7eb22" args="(const char *filepath, size_t *nbytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* qfile_load </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>nbytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Load file into memory. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filepath</em>&nbsp;</td><td>file path </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nbytes</em>&nbsp;</td><td>has two purpost, one is to set how many bytes are readed. the other is actual the number loaded bytes will be stored. nbytes must be point 0 or NULL to read entire file.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>allocated memory pointer if successful, otherwise returns NULL.</dd></dl>
<div class="fragment"><pre class="fragment">   <span class="comment">// loading text file</span>
   <span class="keywordtype">char</span> *text = (<span class="keywordtype">char</span> *)<a class="code" href="qfile_8c.html#a0d1cd1e907efc6272ae969e702c7eb22" title="Load file into memory.">qfile_load</a>(<span class="stringliteral">&quot;/tmp/text.txt&quot;</span>, NULL);

   <span class="comment">// loading binary file</span>
   <span class="keywordtype">int</span> binlen = 0;
   <span class="keywordtype">char</span> *bin = (<span class="keywordtype">char</span> *)<a class="code" href="qfile_8c.html#a0d1cd1e907efc6272ae969e702c7eb22" title="Load file into memory.">qfile_load</a>(<span class="stringliteral">&quot;/tmp/binary.bin&quot;</span>, &amp;binlen);

   <span class="comment">// loading partial</span>
   <span class="keywordtype">int</span> binlen = 10;
   <span class="keywordtype">char</span> *bin = (<span class="keywordtype">char</span> *)<a class="code" href="qfile_8c.html#a0d1cd1e907efc6272ae969e702c7eb22" title="Load file into memory.">qfile_load</a>(<span class="stringliteral">&quot;/tmp/binary.bin&quot;</span>, &amp;binlen);
</pre></div><dl class="note"><dt><b>Note:</b></dt><dd>This method actually allocates memory more than 1 bytes than filesize then append NULL character at the end. For example, when the file size is 10 bytes long, 10+1 bytes will allocated and the last byte is always NULL character. So you can load text file and use without appending NULL character. By the way, the actual file size 10 will be returned at nbytes variable. </dd></dl>

</div>
</div>
<a class="anchor" id="aaa2d98ebd5690feeac3539499bf40f2e"></a><!-- doxytag: member="qfile.c::qfile_read" ref="aaa2d98ebd5690feeac3539499bf40f2e" args="(FILE *fp, size_t *nbytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* qfile_read </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>nbytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read data from a file stream. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fp</em>&nbsp;</td><td>FILE pointer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nbytes</em>&nbsp;</td><td>has two purpose, one is to set bytes to read. the other is to return actual number of bytes loaded. 0 or NULL can be set to read file until the end.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>allocated memory pointer if successful, otherwise returns NULL.</dd></dl>
<div class="fragment"><pre class="fragment">   <span class="keywordtype">int</span> binlen = 0;
   <span class="keywordtype">char</span> *bin = (<span class="keywordtype">char</span> *)<a class="code" href="qfile_8c.html#aaa2d98ebd5690feeac3539499bf40f2e" title="Read data from a file stream.">qfile_read</a>(fp, &amp;binlen);
</pre></div><dl class="note"><dt><b>Note:</b></dt><dd>This method append NULL character at the end of stream. but nbytes only counts actual readed bytes. </dd></dl>

</div>
</div>
<a class="anchor" id="aaef22ff4a8a80e6356583335cc34db64"></a><!-- doxytag: member="qfile.c::qfile_save" ref="aaef22ff4a8a80e6356583335cc34db64" args="(const char *filepath, const void *buf, size_t size, bool append)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t qfile_save </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>append</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Save data into file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filepath</em>&nbsp;</td><td>file path </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>the number of bytes to save </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>append</em>&nbsp;</td><td>false for new(if exists truncate), true for appending</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of bytes written if successful, otherwise returns -1.</dd></dl>
<div class="fragment"><pre class="fragment">   <span class="comment">// save text</span>
   <span class="keywordtype">char</span> *text = <span class="stringliteral">&quot;hello&quot;</span>;
   <a class="code" href="qfile_8c.html#aaef22ff4a8a80e6356583335cc34db64" title="Save data into file.">qfile_save</a>(<span class="stringliteral">&quot;/tmp/text.txt&quot;</span>, (<span class="keywordtype">void</span>*)text, strlen(text), <span class="keyword">false</span>);

   <span class="comment">// save binary</span>
   <span class="keywordtype">int</span> integer1 = 75;
   <a class="code" href="qfile_8c.html#aaef22ff4a8a80e6356583335cc34db64" title="Save data into file.">qfile_save</a>(<span class="stringliteral">&quot;/tmp/integer.bin, (void*)&amp;integer, sizeof(int));</span>
</pre></div> 
</div>
</div>
<a class="anchor" id="ae623f84683c9aa6f58ead2f16a8f63db"></a><!-- doxytag: member="qfile.c::qfile_mkdir" ref="ae623f84683c9aa6f58ead2f16a8f63db" args="(const char *dirpath, mode_t mode, bool recursive)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool qfile_mkdir </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>dirpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mode_t&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>recursive</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attempts to create a directory recursively. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dirpath</em>&nbsp;</td><td>directory path </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>permissions to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>recursive</em>&nbsp;</td><td>whether or not to create parent directories automatically</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if successful, otherwise returns false. </dd></dl>

</div>
</div>
<a class="anchor" id="af382e5541d166ecb6229dcac10a029ff"></a><!-- doxytag: member="qfile.c::qfile_check_path" ref="af382e5541d166ecb6229dcac10a029ff" args="(const char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool qfile_check_path </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check path string contains invalid characters. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>path string</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if ok, otherwise returns false. </dd></dl>

</div>
</div>
<a class="anchor" id="a0321a4d7ef62cd24639626eb4ccaf751"></a><!-- doxytag: member="qfile.c::qfile_get_name" ref="a0321a4d7ef62cd24639626eb4ccaf751" args="(const char *filepath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* qfile_get_name </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filepath</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get filename from filepath. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filepath</em>&nbsp;</td><td>file or directory path</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>malloced filename string </dd></dl>

</div>
</div>
<a class="anchor" id="aef38e80b0559f31af14dbeabbd1ac7a8"></a><!-- doxytag: member="qfile.c::qfile_get_dir" ref="aef38e80b0559f31af14dbeabbd1ac7a8" args="(const char *filepath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* qfile_get_dir </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filepath</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get directory suffix from filepath. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filepath</em>&nbsp;</td><td>file or directory path</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>malloced filepath string </dd></dl>

</div>
</div>
<a class="anchor" id="aed46fca5010cfdedca9da70f904210fa"></a><!-- doxytag: member="qfile.c::qfile_get_ext" ref="aed46fca5010cfdedca9da70f904210fa" args="(const char *filepath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* qfile_get_ext </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filepath</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get extension from filepath. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filepath</em>&nbsp;</td><td>file or directory path</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>malloced extension string which is converted to lower case. </dd></dl>

</div>
</div>
<a class="anchor" id="af4b95ff503ddf957bc1d0d1a139a4be2"></a><!-- doxytag: member="qfile.c::qfile_get_size" ref="af4b95ff503ddf957bc1d0d1a139a4be2" args="(const char *filepath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">off_t qfile_get_size </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filepath</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get file size. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filepath</em>&nbsp;</td><td>file or directory path</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the file size if exists, otherwise returns -1. </dd></dl>

</div>
</div>
<a class="anchor" id="a1f45c0b35c3a43acd632d79c6dcfea70"></a><!-- doxytag: member="qfile.c::qfile_correct_path" ref="a1f45c0b35c3a43acd632d79c6dcfea70" args="(char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* qfile_correct_path </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Correct path string. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>path string</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>path string pointer</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This modify path argument itself.</dd></dl>
<div class="fragment"><pre class="fragment">   <span class="stringliteral">&quot;/hello//my/../world&quot;</span> =&gt; <span class="stringliteral">&quot;/hello/world&quot;</span>
   <span class="stringliteral">&quot;././././hello/./world&quot;</span> =&gt; <span class="stringliteral">&quot;./hello/world&quot;</span>
   <span class="stringliteral">&quot;/../hello//world&quot;</span> =&gt; <span class="stringliteral">&quot;/hello/world&quot;</span>
   <span class="stringliteral">&quot;/../hello//world/&quot;</span> =&gt; <span class="stringliteral">&quot;/hello/world&quot;</span>
</pre></div> 
</div>
</div>
<a class="anchor" id="a145c18b1c6a05c971129cf7d4247b921"></a><!-- doxytag: member="qfile.c::qfile_abspath" ref="a145c18b1c6a05c971129cf7d4247b921" args="(char *buf, size_t bufsize, const char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* qfile_abspath </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>bufsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>path</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Make full absolute system path string. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>buffer string pointer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bufsize</em>&nbsp;</td><td>buffer size </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>path string</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>buffer pointer if successful, otherwise returns NULL.</dd></dl>
<div class="fragment"><pre class="fragment">   <span class="keywordtype">char</span> buf[PATH_MAX];
   chdir(<span class="stringliteral">&quot;/usr/local&quot;</span>);
   <a class="code" href="qfile_8c.html#a145c18b1c6a05c971129cf7d4247b921" title="Make full absolute system path string.">qfile_abspath</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;.&quot;</span>);    <span class="comment">// returns &quot;/usr/local&quot;</span>
   <a class="code" href="qfile_8c.html#a145c18b1c6a05c971129cf7d4247b921" title="Make full absolute system path string.">qfile_abspath</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;..&quot;</span>);   <span class="comment">// returns &quot;/usr&quot;</span>
   <a class="code" href="qfile_8c.html#a145c18b1c6a05c971129cf7d4247b921" title="Make full absolute system path string.">qfile_abspath</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;etc&quot;</span>);  <span class="comment">// returns &quot;/usr/local/etc&quot;</span>
   <a class="code" href="qfile_8c.html#a145c18b1c6a05c971129cf7d4247b921" title="Make full absolute system path string.">qfile_abspath</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;/etc&quot;</span>); <span class="comment">// returns &quot;/etc&quot;</span>
   <a class="code" href="qfile_8c.html#a145c18b1c6a05c971129cf7d4247b921" title="Make full absolute system path string.">qfile_abspath</a>(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;/etc/&quot;</span>); <span class="comment">// returns &quot;/etc/&quot;</span>
</pre></div> 
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
<a href="http://www.qdecoder.org/">The qDecoder Project</a>.
Tue Jun 12 2012 07:35:13
</small></address>
</body>
</html>
